"use strict";function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,n){for(var e=0;e<n.length;e++){var o=n[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(n,e,o){return e&&t(n.prototype,e),o&&t(n,o),n}}(),FastSite=function(){function t(){var n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];_classCallCheck(this,t);var e={debug:!1,onScroll:!0,duration:200};this.options=Object.assign(e,n),this.windowHeight=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,this._bindEvents(),this._loadScripts(),this._loadImages()}return _createClass(t,[{key:"_bindEvents",value:function(){var t=this;window.onresize=function(){t.windowHeight=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight}}},{key:"_loadScripts",value:function(){var t=this;this.scripts=document.querySelectorAll("script[data-src]");var n,e=this.scripts.length,o=function(){var e=t.scripts[n];e.onload=function(){t.log("SCRIPT: success load: "+e.src)},e.onerror=function(){t.log("SCRIPT: failed load: "+e.src)},e.src=e.dataset.src};for(n=0;e>n;n++)o()}},{key:"_loadImages",value:function(){var t=this;this.images=document.querySelectorAll("img[data-src]");var n,e=this.images.length,o=function(){var e=t.images[n];e.style.opacity=0,e.style.transition="opacity "+t.options.duration+"ms ease-in",e.onload=function(){t.log("IMG: success load: "+e.src),e.style.opacity=1},e.onerror=function(){t.log("IMG: failed load: "+e.src)},t.options.onScroll||(e.src=e.dataset.src)};for(n=0;e>n;n++)o();this.options.onScroll&&(window.onscroll=function(){var n,e=t.images.length;for(n=0;e>n;n++){var o=t.images[n];if(!o.src){var i=o.getBoundingClientRect().top;t.windowHeight>i&&(o.src=o.dataset.src)}}},window.onscroll())}},{key:"log",value:function(t){this.options.debug&&console.log(t)}}]),t}();window.$fast=new FastSite({debug:"#debug"===window.location.hash});
//# sourceMappingURL=fastsite.min.js.map
