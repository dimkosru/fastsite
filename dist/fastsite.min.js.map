{"version":3,"sources":["fastsite.js"],"names":["_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","prototype","FastSite","options","arguments","undefined","this","defaults","debug","onScroll","duration","assign","windowHeight","window","innerHeight","document","documentElement","clientHeight","body","_bindEvents","_loadScripts","_loadImages","value","_this","onresize","_this2","scripts","querySelectorAll","count","_loop","script","onload","log","src","onerror","dataset","_this3","images","_loop2","image","style","opacity","transition","onscroll","imageTop","getBoundingClientRect","top","data","console","$fast","location","hash"],"mappings":"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","file":"fastsite.min.js","sourcesContent":["\"use strict\";\n\nclass FastSite {\n\tconstructor (options = {}) {\n\t\tvar defaults = {\n\t\t\tdebug: false,\n\t\t\tonScroll: true,\n\t\t\tduration: 200\n\t\t};\n\n\t\tthis.options = Object.assign(defaults, options);\n\n\t\tthis.windowHeight = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight;\n\n\t\tthis._bindEvents();\n\t\tthis._loadScripts();\n\t\tthis._loadImages();\n\t}\n\n\t_bindEvents () {\n\t\twindow.onresize = () => {\n\t\t\tthis.windowHeight = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight;\n\t\t}\n\t}\n\n\t_loadScripts () {\n\t\tthis.scripts = document.querySelectorAll('script[data-src]');\n\n\t\tvar i, count = this.scripts.length;\n\n\t\tfor (i = 0; i < count; i++) {\n\t\t\tlet script = this.scripts[ i ];\n\n\t\t\tscript.onload = () => {\n\t\t\t\tthis.log(`SCRIPT: success load: ${script.src}`);\n\t\t\t};\n\n\t\t\tscript.onerror = () => {\n\t\t\t\tthis.log(`SCRIPT: failed load: ${script.src}`);\n\t\t\t};\n\n\t\t\tscript.src = script.dataset.src;\n\t\t}\n\t}\n\n\t_loadImages () {\n\t\tthis.images = document.querySelectorAll('img[data-src]');\n\n\t\tvar i, count = this.images.length;\n\n\t\tfor (i = 0; i < count; i++) {\n\t\t\tlet image = this.images[ i ];\n\n\t\t\timage.style.opacity = 0;\n\t\t\timage.style.transition = `opacity ${this.options.duration}ms ease-in`;\n\n\t\t\timage.onload = () => {\n\t\t\t\tthis.log(`IMG: success load: ${image.src}`);\n\n\t\t\t\timage.style.opacity = 1;\n\t\t\t};\n\n\t\t\timage.onerror = () => {\n\t\t\t\tthis.log(`IMG: failed load: ${image.src}`);\n\t\t\t};\n\n\t\t\tif (!this.options.onScroll) {\n\t\t\t\timage.src = image.dataset.src;\n\t\t\t}\n\t\t}\n\n\t\tif (this.options.onScroll) {\n\t\t\twindow.onscroll = () => {\n\t\t\t\tvar i, count = this.images.length;\n\n\t\t\t\tfor (i = 0; i < count; i++) {\n\t\t\t\t\tlet image = this.images[ i ];\n\n\t\t\t\t\tif (!image.src) {\n\t\t\t\t\t\tlet imageTop = image.getBoundingClientRect().top;\n\n\t\t\t\t\t\tif (this.windowHeight > imageTop) {\n\t\t\t\t\t\t\timage.src = image.dataset.src;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\t\twindow.onscroll();\n\t\t}\n\t}\n\n\tlog (data) {\n\t\tif (this.options.debug) console.log(data);\n\t}\n}\n\nwindow.$fast = new FastSite({\n\tdebug: window.location.hash === '#debug'\n});"],"sourceRoot":"/source/"}